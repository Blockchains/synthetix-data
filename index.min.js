!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("node-fetch")):t.snxData=e(t.fetch)}("undefined"!=typeof self?self:this,(function(t){"use strict";const e="https://api.thegraph.com/subgraphs/name/synthetixio-team/synthetix-depot",n="https://api.thegraph.com/subgraphs/name/synthetixio-team/synthetix-exchanges",r=({api:e,queryCreator:n,field:r})=>{const o=({skip:s})=>t(e,{method:"POST",body:n({skip:s}).replace(/(\n|\t)+/g,"")}).then(t=>t.json()).then(t=>{if(t.errors)throw Error(JSON.stringify(t.errors));const{data:{[r]:e}}=t;return e.length<100?e:o({skip:s+100}).then(t=>e.concat(t))});return o({skip:0})},o=t=>{const e=t.toString();let n="";for(let t=2;t<e.length;t+=2){const r=e.substr(t,2);"00"!==r&&(n+=String.fromCharCode(parseInt(r,16)))}return n};return{pageResults:r,depot:{userActions:({network:t="mainnet",user:n})=>r({api:e,field:"userActions",queryCreator:({skip:e})=>`{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\tuserActions(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${e},\n\t\t\t\t\t\t\t\t\torderBy:timestamp,\n\t\t\t\t\t\t\t\t\torderDirection:desc,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tnetwork: \\"${t}\\",\n\t\t\t\t\t\t\t\t\t\tuser: \\"${n}\\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tuser\n\t\t\t\t\t\t\t\t\tamount,\n\t\t\t\t\t\t\t\t\tminimum,\n\t\t\t\t\t\t\t\t\tdepositIndex,\n\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}`}).then(t=>t.map(({id:t,user:e,amount:n,type:r,minimum:o,depositIndex:s,block:m,timestamp:i})=>({hash:t.split("-")[0],user:e,amount:n/1e18,type:r,minimum:null!==o?Number(o):null,depositIndex:null!==s?Number(s):null,block:Number(m),timestamp:Number(1e3*i),date:new Date(1e3*i)}))).catch(t=>console.error(t)),clearedDeposits:({network:t="mainnet",fromAddress:n,toAddress:o})=>r({api:e,field:"clearedDeposits",queryCreator:({skip:e})=>`{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\tclearedDeposits(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${e},\n\t\t\t\t\t\t\t\t\torderBy:timestamp,\n\t\t\t\t\t\t\t\t\torderDirection:desc,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tnetwork: \\"${t}\\"\n\t\t\t\t\t\t\t\t\t\t${n?`,fromAddress: \\"${n}\\"`:""}\n\t\t\t\t\t\t\t\t\t\t${o?`,toAddress: \\"${o}\\"`:""}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tfromAddress,\n\t\t\t\t\t\t\t\t\ttoAddress,\n\t\t\t\t\t\t\t\t\tfromETHAmount,\n\t\t\t\t\t\t\t\t\ttoAmount,\n\t\t\t\t\t\t\t\t\tdepositIndex,\n\t\t\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}`}).then(t=>t.map(({id:t,fromAddress:e,toAddress:n,fromETHAmount:r,toAmount:o,depositIndex:s,block:m,timestamp:i})=>({hash:t.split("-")[0],fromAddress:e,toAddress:n,fromETHAmount:r/1e18,toAmount:o/1e18,depositIndex:null!==s?Number(s):null,block:Number(m),timestamp:Number(1e3*i),date:new Date(1e3*i)}))).catch(t=>console.error(t))},exchanges:{total:({network:t="mainnet"}={})=>r({api:n,field:"totals",queryCreator:()=>`{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\ttotals(\n\t\t\t\t\t\t\t\t\tfirst: 1,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tid: \\"${t}\\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\texchangers,\n\t\t\t\t\t\t\t\t\texchangeUSDTally,\n\t\t\t\t\t\t\t\t\ttotalFeesGeneratedInUSD\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}`}).then(([{id:t,exchangers:e,exchangeUSDTally:n,totalFeesGeneratedInUSD:r}])=>({id:t,exchangers:Number(e),exchangeUSDTally:n/1e18,totalFeesGeneratedInUSD:r/1e18})).catch(t=>console.error(t)),since:({network:t="mainnet",timestampInSecs:e=Math.floor(Date.now()/1e3)-86400}={})=>r({api:n,field:"synthExchanges",queryCreator:({skip:n})=>`{\n\t\t\t\t\t\t\t"query":"{\n\t\t\t\t\t\t\t\tsynthExchanges(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${n},\n\t\t\t\t\t\t\t\t\torderBy:timestamp,\n\t\t\t\t\t\t\t\t\torderDirection:desc,\n\t\t\t\t\t\t\t\t\twhere:{\n\t\t\t\t\t\t\t\t\t\tnetwork: \\"${t}\\",\n\t\t\t\t\t\t\t\t\t\ttimestamp_gt: ${e}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tfrom,\n\t\t\t\t\t\t\t\t\tgasPrice,\n\t\t\t\t\t\t\t\t\tfrom,\n\t\t\t\t\t\t\t\t\tfromAmount,\n\t\t\t\t\t\t\t\t\tfromAmountInUSD,\n\t\t\t\t\t\t\t\t\tfromCurrencyKey,\n\t\t\t\t\t\t\t\t\ttoCurrencyKey,\n\t\t\t\t\t\t\t\t\ttoAddress,\n\t\t\t\t\t\t\t\t\ttoAmount,\n\t\t\t\t\t\t\t\t\ttoAmountInUSD,\n\t\t\t\t\t\t\t\t\tfeesInUSD,\n\t\t\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables":null\n\t\t\t\t\t\t}`}).then(t=>t.map(({gasPrice:t,timestamp:e,id:n,from:r,fromAmount:s,block:m,fromAmountInUSD:i,fromCurrencyKey:a,toAddress:d,toAmount:u,toAmountInUSD:c,toCurrencyKey:l,feesInUSD:p})=>({gasPrice:t/1e9,block:Number(m),timestamp:Number(1e3*e),date:new Date(1e3*e),hash:n.split("-")[0],fromAddress:r,fromAmount:s/1e18,fromCurrencyKeyBytes:a,fromCurrencyKey:o(a),fromAmountInUSD:i/1e18,toAmount:u/1e18,toAmountInUSD:c/1e18,toCurrencyKeyBytes:l,toCurrencyKey:o(l),toAddress:d,feesInUSD:p/1e18}))).catch(t=>console.error(t))}}}));
