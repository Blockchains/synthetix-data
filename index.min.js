!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("node-fetch")):t.snxData=e(t.fetch)}("undefined"!=typeof self?self:this,(function(t){"use strict";const e="https://api.thegraph.com/subgraphs/name/synthetixio-team/synthetix",n="https://api.thegraph.com/subgraphs/name/synthetixio-team/synthetix-depot",r="https://api.thegraph.com/subgraphs/name/synthetixio-team/synthetix-exchanges",s=({api:e,queryCreator:n,field:r})=>{const s=({skip:o})=>t(e,{method:"POST",body:n({skip:o}).replace(/(\n|\t)+/g,"")}).then(t=>t.json()).then(t=>{if(t.errors)throw Error(JSON.stringify(t.errors));const{data:{[r]:e}}=t;return e.length<100?e:s({skip:o+100}).then(t=>e.concat(t))});return s({skip:0})},o=t=>{const e=t.toString();let n="";for(let t=2;t<e.length;t+=2){const r=e.substr(t,2);"00"!==r&&(n+=String.fromCharCode(parseInt(r,16)))}return n};return{pageResults:s,depot:{userActions:({network:t="mainnet",user:e})=>s({api:n,field:"userActions",queryCreator:({skip:n})=>`{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\tuserActions(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${n},\n\t\t\t\t\t\t\t\t\torderBy:timestamp,\n\t\t\t\t\t\t\t\t\torderDirection:desc,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tnetwork: \\"${t}\\",\n\t\t\t\t\t\t\t\t\t\tuser: \\"${e}\\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tuser\n\t\t\t\t\t\t\t\t\tamount,\n\t\t\t\t\t\t\t\t\tminimum,\n\t\t\t\t\t\t\t\t\tdepositIndex,\n\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}`}).then(t=>t.map(({id:t,user:e,amount:n,type:r,minimum:s,depositIndex:o,block:i,timestamp:a})=>({hash:t.split("-")[0],user:e,amount:n/1e18,type:r,minimum:null!==s?Number(s):null,depositIndex:null!==o?Number(o):null,block:Number(i),timestamp:Number(1e3*a),date:new Date(1e3*a)}))).catch(t=>console.error(t)),clearedDeposits:({network:t="mainnet",fromAddress:e,toAddress:r})=>s({api:n,field:"clearedDeposits",queryCreator:({skip:n})=>`{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\tclearedDeposits(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${n},\n\t\t\t\t\t\t\t\t\torderBy:timestamp,\n\t\t\t\t\t\t\t\t\torderDirection:desc,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tnetwork: \\"${t}\\"\n\t\t\t\t\t\t\t\t\t\t${e?`,fromAddress: \\"${e}\\"`:""}\n\t\t\t\t\t\t\t\t\t\t${r?`,toAddress: \\"${r}\\"`:""}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tfromAddress,\n\t\t\t\t\t\t\t\t\ttoAddress,\n\t\t\t\t\t\t\t\t\tfromETHAmount,\n\t\t\t\t\t\t\t\t\ttoAmount,\n\t\t\t\t\t\t\t\t\tdepositIndex,\n\t\t\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}`}).then(t=>t.map(({id:t,fromAddress:e,toAddress:n,fromETHAmount:r,toAmount:s,depositIndex:o,block:i,timestamp:a})=>({hash:t.split("-")[0],fromAddress:e,toAddress:n,fromETHAmount:r/1e18,toAmount:s/1e18,depositIndex:null!==o?Number(o):null,block:Number(i),timestamp:Number(1e3*a),date:new Date(1e3*a)}))).catch(t=>console.error(t))},exchanges:{total:({network:t="mainnet"}={})=>s({api:r,field:"totals",queryCreator:()=>`{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\ttotals(\n\t\t\t\t\t\t\t\t\tfirst: 1,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tid: \\"${t}\\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\texchangers,\n\t\t\t\t\t\t\t\t\texchangeUSDTally,\n\t\t\t\t\t\t\t\t\ttotalFeesGeneratedInUSD\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}`}).then(([{id:t,exchangers:e,exchangeUSDTally:n,totalFeesGeneratedInUSD:r}])=>({id:t,exchangers:Number(e),exchangeUSDTally:n/1e18,totalFeesGeneratedInUSD:r/1e18})).catch(t=>console.error(t)),since:({network:t="mainnet",timestampInSecs:e=Math.floor(Date.now()/1e3)-86400}={})=>s({api:r,field:"synthExchanges",queryCreator:({skip:n})=>`{\n\t\t\t\t\t\t\t"query":"{\n\t\t\t\t\t\t\t\tsynthExchanges(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${n},\n\t\t\t\t\t\t\t\t\torderBy:timestamp,\n\t\t\t\t\t\t\t\t\torderDirection:desc,\n\t\t\t\t\t\t\t\t\twhere:{\n\t\t\t\t\t\t\t\t\t\tnetwork: \\"${t}\\",\n\t\t\t\t\t\t\t\t\t\ttimestamp_gt: ${e}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\tfrom,\n\t\t\t\t\t\t\t\t\tgasPrice,\n\t\t\t\t\t\t\t\t\tfrom,\n\t\t\t\t\t\t\t\t\tfromAmount,\n\t\t\t\t\t\t\t\t\tfromAmountInUSD,\n\t\t\t\t\t\t\t\t\tfromCurrencyKey,\n\t\t\t\t\t\t\t\t\ttoCurrencyKey,\n\t\t\t\t\t\t\t\t\ttoAddress,\n\t\t\t\t\t\t\t\t\ttoAmount,\n\t\t\t\t\t\t\t\t\ttoAmountInUSD,\n\t\t\t\t\t\t\t\t\tfeesInUSD,\n\t\t\t\t\t\t\t\t\tblock,\n\t\t\t\t\t\t\t\t\ttimestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables":null\n\t\t\t\t\t\t}`}).then(t=>t.map(({gasPrice:t,timestamp:e,id:n,from:r,fromAmount:s,block:i,fromAmountInUSD:a,fromCurrencyKey:m,toAddress:u,toAmount:d,toAmountInUSD:l,toCurrencyKey:c,feesInUSD:p})=>({gasPrice:t/1e9,block:Number(i),timestamp:Number(1e3*e),date:new Date(1e3*e),hash:n.split("-")[0],fromAddress:r,fromAmount:s/1e18,fromCurrencyKeyBytes:m,fromCurrencyKey:o(m),fromAmountInUSD:a/1e18,toAmount:d/1e18,toAmountInUSD:l/1e18,toCurrencyKeyBytes:c,toCurrencyKey:o(c),toAddress:u,feesInUSD:p/1e18}))).catch(t=>console.error(t))},synths:{issuers:()=>s({api:e,field:"issuers",queryCreator:({skip:t})=>`{\n\t\t\t\t\t\t\t"query":"{\n\t\t\t\t\t\t\t\tissuers(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables":null\n\t\t\t\t\t\t}`}).then(t=>t.map(({id:t})=>t)).catch(t=>console.error(t))},snx:{holders:()=>s({api:e,field:"snxholders",queryCreator:({skip:t})=>`{\n\t\t\t\t\t\t\t"query":"{\n\t\t\t\t\t\t\t\tsnxholders(\n\t\t\t\t\t\t\t\t\tfirst:100,\n\t\t\t\t\t\t\t\t\tskip:${t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables":null\n\t\t\t\t\t\t}`}).then(t=>t.map(({id:t})=>t)).catch(t=>console.error(t)),total:()=>s({api:e,field:"synthetixes",queryCreator:()=>'{\n\t\t\t\t\t\t\t"query": "{\n\t\t\t\t\t\t\t\tsynthetixes(\n\t\t\t\t\t\t\t\t\tfirst: 1,\n\t\t\t\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\t\t\t\tid: \\"1\\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\t\tid,\n                  issuers,\n                  snxHolders\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}",\n\t\t\t\t\t\t\t"variables": null\n\t\t\t\t\t\t}'}).then(([{issuers:t,snxHolders:e}])=>({issuers:Number(t),snxHolders:Number(e)})).catch(t=>console.error(t))}}}));
